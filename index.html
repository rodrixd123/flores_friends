<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Girasoles</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: url('https://i.pinimg.com/1200x/85/5d/69/855d69beafc8e22fbfff9c123e761577.jpg') no-repeat center center fixed;
      background-size: cover;
      flex-direction: column;
      overflow: hidden;
    }

    .flower__wrapper {
      position: relative;
      width: 50vh;
      height: 55vh;
      display: flex;
      justify-content: center;
      align-items: flex-end;
    }

    /* --- C칰pula de vidrio --- */
    .cupula {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
      border-radius: 50% 50% 0 0;
      background: rgba(120, 120, 120, 0.22);
      box-shadow: 0 0 32px 8px rgba(120, 120, 120, 0.18);
      overflow: hidden;
      transition: transform 1.5s ease, opacity 1.5s ease;
      cursor: pointer;
      z-index: 2;
    }

    /* Animaci칩n levantar solo la c칰pula */
    .cupula.levantar {
      transform: translateY(-120%) scale(0.9) rotateX(45deg);
      opacity: 0;
    }

    .cupula:before {
      content: '';
      position: absolute;
      top: 4%;
      left: 4%;
      width: 92%;
      height: 96%;
      background: radial-gradient(circle at top left, rgba(120, 120, 120, 0.18) 0%, transparent 100%);
      border-radius: 50% 50% 0 0;
    }

    .cupula:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at top left, rgba(120, 120, 120, 0.18) 0%, transparent 100%);
    }

    /* Flor */
    .flower {
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      animation: float 3s ease-in-out infinite;
      position: relative;
      z-index: 1;
    }

    .imagen {
      height: 49vh;
      width: 49vh;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    /* Part칤culas */
    .particles {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: visible;
      z-index: 0;
    }

    .particle {
      position: absolute;
      bottom: 0;
      width: 8px;
      height: 8px;
      background: radial-gradient(circle, #FFD700, #FFA500);
      border-radius: 50%;
      opacity: 0.9;
      animation: polen 4.2s linear forwards;
    }

    @keyframes polen {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      80% {
        opacity: 0.7;
      }
      100% {
        transform: translate(var(--x), var(--y)) scale(0.7);
        opacity: 0;
      }
    }

    .titulo {
      margin-bottom: 20px;
      color: #111 !important;
      font-size: 2em;
      text-align: center;
      animation: fadeIn 4s ease-in-out forwards;
      opacity: 0;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }



    /* Instrucci칩n para hacer clic */
    .instruction {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #333;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 1.1em;
      animation: pulse 2s infinite;
      z-index: 10;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    .instruction.hidden {
      opacity: 0;
      transition: opacity 0.5s ease;
    }
  </style>
</head>

<body>
  <div class="instruction" id="instruction">
    游꺝 presiona la flor si no te ba침aste 游꺝
  </div>

  <h1 class="titulo"> Te regalo esta flor amarilla 游꺝 <br>
    para recordarte que siempre ser치s mi esclava :b </h1>

  <div class="flower__wrapper">
    <!-- Flor (quieta) -->
    <div class="flower">
      <img class="imagen"
        src="https://github.com/copill2005/imagen-flor/blob/main/d41ef946c455e1a52cc09145cae1e8c5.png?raw=true" />
    </div>

    <!-- C칰pula de vidrio (se levanta) -->
    <div class="cupula" id="cupula"></div>

    <!-- Contenedor de part칤culas -->
    <div class="particles" id="particles"></div>
  </div>

  <!-- Controles de audio -->
  <div class="audio-controls">
    <audio controls id="backgroundMusic">
      <source src="Floricienta.mp3" type="audio/mpeg">
      <source src="Floricienta.mp3" type="audio/wav">
      <source src="Floricienta.mp3" type="audio/ogg">
      Tu navegador no soporta el elemento de audio.
    </audio>
  </div>

  <script>
    const cupula = document.getElementById("cupula");
    const particlesContainer = document.getElementById("particles");
    const backgroundMusic = document.getElementById("backgroundMusic");
    const instruction = document.getElementById("instruction");

    let polenActivo = false;
    let polenInterval = null;
    let audioActivated = false;

    cupula.addEventListener("click", () => {
      cupula.classList.add("levantar");
      instruction.classList.add("hidden");
      
      // Reproducir audio cuando se hace clic
      if (!audioActivated) {
        backgroundMusic.play().catch(e => {
          console.log("Error al reproducir audio:", e);
        });
        audioActivated = true;
      }

      if (!polenActivo) {
        polenActivo = true;
        iniciarPolen();
      }
    });

    // Tambi칠n permitir reproducir/pausar con clic en los controles

    function iniciarPolen() {
      polenInterval = setInterval(() => {
        crearParticulaPolenLateral();
        crearParticulaPolenIzquierda();
      }, 40); // a칰n m치s part칤culas, cada 40ms
    }

    function crearParticulaPolen() {
      const p = document.createElement("div");
      p.className = "particle";
      const flor = document.querySelector('.imagen');
      const wrapper = document.querySelector('.flower__wrapper');
      const florRect = flor.getBoundingClientRect();
      const wrapperRect = wrapper.getBoundingClientRect();
      // centro inferior de la flor
      const xFlor = florRect.left + florRect.width / 2 - wrapperRect.left;
      const yFlor = florRect.bottom - wrapperRect.top - 10;

      p.style.left = xFlor + "px";
      p.style.bottom = (wrapperRect.height - yFlor) + "px";

      // Trayectoria: dispersi칩n por toda la web
      const angulo = Math.random() * 2 * Math.PI; // 360춿
      const distancia = 220 + Math.random() * 600;
      const x = Math.cos(angulo) * distancia + "px";
      const y = -60 - Math.random() * 400 + "px";

      p.style.setProperty("--x", x);
      p.style.setProperty("--y", y);

      particlesContainer.appendChild(p);
      setTimeout(() => p.remove(), 4200);
    }

    // Part칤culas desde el contorno izquierdo de la flor
    function crearParticulaPolenLateral() {
      const p = document.createElement("div");
      p.className = "particle";
      const flor = document.querySelector('.imagen');
      const wrapper = document.querySelector('.flower__wrapper');
      const florRect = flor.getBoundingClientRect();
      const wrapperRect = wrapper.getBoundingClientRect();
      // lado izquierdo inferior de la flor
      const xFlor = florRect.left - wrapperRect.left + 8; // 8px dentro del borde
      const yFlor = florRect.bottom - wrapperRect.top - 10;

      p.style.left = xFlor + "px";
      p.style.bottom = (wrapperRect.height - yFlor) + "px";

      // Trayectoria: dispersi칩n por toda la web
      const angulo = Math.random() * Math.PI * 1.3 + Math.PI * 0.2; // entre 36춿 y 216춿
      const distancia = 220 + Math.random() * 600;
      const x = Math.cos(angulo) * distancia + "px";
      const y = -60 - Math.random() * 400 + "px";

      p.style.setProperty("--x", x);
      p.style.setProperty("--y", y);

      particlesContainer.appendChild(p);
      setTimeout(() => p.remove(), 4200);
    }

    // Part칤culas desde el contorno derecho de la flor
    function crearParticulaPolenDerecha() {
      const p = document.createElement("div");
      p.className = "particle";
      const flor = document.querySelector('.imagen');
      const wrapper = document.querySelector('.flower__wrapper');
      const florRect = flor.getBoundingClientRect();
      const wrapperRect = wrapper.getBoundingClientRect();
      // lado derecho inferior de la flor
      const xFlor = florRect.left - wrapperRect.left + florRect.width - 8; // 8px dentro del borde derecho
      const yFlor = florRect.bottom - wrapperRect.top - 10;

      p.style.left = xFlor + "px";
      p.style.bottom = (wrapperRect.height - yFlor) + "px";

      // Trayectoria: dispersi칩n por toda la web
      const angulo = Math.random() * Math.PI * 1.3 - Math.PI * 0.5; // entre -72춿 y +144춿
      const distancia = 220 + Math.random() * 600;
      const x = Math.cos(angulo) * distancia + "px";
      const y = -60 - Math.random() * 400 + "px";

      p.style.setProperty("--x", x);
      p.style.setProperty("--y", y);

      particlesContainer.appendChild(p);
      setTimeout(() => p.remove(), 4200);
    }

    // Part칤culas desde el extremo izquierdo de la flor
    function crearParticulaPolenIzquierda() {
      const p = document.createElement("div");
      p.className = "particle";
      const flor = document.querySelector('.imagen');
      const wrapper = document.querySelector('.flower__wrapper');
      const florRect = flor.getBoundingClientRect();
      const wrapperRect = wrapper.getBoundingClientRect();
      // extremo izquierdo inferior de la flor
      const xFlor = florRect.left - wrapperRect.left; // borde izquierdo exacto
      const yFlor = florRect.bottom - wrapperRect.top - 10;

      p.style.left = xFlor + "px";
      p.style.bottom = (wrapperRect.height - yFlor) + "px";

      // Trayectoria: dispersi칩n por toda la web
      const angulo = Math.random() * Math.PI * 1.1 + Math.PI * 0.3; // entre ~54춿 y ~210춿
      const distancia = 220 + Math.random() * 600;
      const x = Math.cos(angulo) * distancia + "px";
      const y = -60 - Math.random() * 400 + "px";

      p.style.setProperty("--x", x);
      p.style.setProperty("--y", y);

      particlesContainer.appendChild(p);
      setTimeout(() => p.remove(), 4200);
    }
  </script>
</body>

</html>